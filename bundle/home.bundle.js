!function(t){function e(e){for(var a,c,r=e[0],s=e[1],d=e[2],p=0,u=[];p<r.length;p++)c=r[p],i[c]&&u.push(i[c][0]),i[c]=0;for(a in s)Object.prototype.hasOwnProperty.call(s,a)&&(t[a]=s[a]);for(l&&l(e);u.length;)u.shift()();return o.push.apply(o,d||[]),n()}function n(){for(var t,e=0;e<o.length;e++){for(var n=o[e],a=!0,r=1;r<n.length;r++){var s=n[r];0!==i[s]&&(a=!1)}a&&(o.splice(e--,1),t=c(c.s=n[0]))}return t}var a={},i={1:0},o=[];function c(e){if(a[e])return a[e].exports;var n=a[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.m=t,c.c=a,c.d=function(t,e,n){c.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:n})},c.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},c.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return c.d(e,"a",e),e},c.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},c.p="/bundle/";var r=window.webpackJsonp=window.webpackJsonp||[],s=r.push.bind(r);r.push=e,r=r.slice();for(var d=0;d<r.length;d++)e(r[d]);var l=s;o.push([42,0]),n()}({39:function(t,e,n){"use strict";n.r(e),n.d(e,"default",function(){return i});var a=n(0);function i(t={}){var e=Object(a.document_createElement)("div");Object(a.setAttribute)(e,"class","entity-list-item");var n=Object(a.document_createElement)("div");Object(a.setAttribute)(n,"class","item-icon");var i=Object(a.document_createElement)("img");Object(a.setAttribute)(i,"alt","icon"),Object(a.setAttribute)(i,"height","20"),Object(a.setAttribute)(i,"src","public/img/mindmap-white.svg"),Object(a.appendChild)(n,i),Object(a.appendChild)(e,n);var o=Object(a.document_createElement)("div");Object(a.setAttribute)(o,"class","item-content-secondary");var c=Object(a.document_createElement)("div");Object(a.setAttribute)(c,"class","content-text-primary"),Object(a.appendChild)(c,Object(a.document_createTextNode)(""+t.timeago)),Object(a.appendChild)(o,c);var r=Object(a.document_createElement)("div");Object(a.setAttribute)(r,"class","content-text-secondary"),Object(a.appendChild)(r,Object(a.document_createTextNode)(""+t.date)),Object(a.appendChild)(o,r),Object(a.appendChild)(e,o);var s=Object(a.document_createElement)("div");Object(a.setAttribute)(s,"class","item-content-primary");var d=Object(a.document_createElement)("div");Object(a.setAttribute)(d,"class","content-text-primary"),Object(a.appendChild)(d,Object(a.document_createTextNode)(""+t.name)),Object(a.appendChild)(s,d);var l=Object(a.document_createElement)("div");Object(a.setAttribute)(l,"class","content-text-secondary"),Object(a.appendChild)(l,Object(a.document_createTextNode)(""+t.available)),Object(a.appendChild)(s,l),Object(a.appendChild)(e,s);var p=Object(a.document_createElement)("div");Object(a.setAttribute)(p,"class","item-content-expanded");var u=Object(a.document_createElement)("button");Object(a.setAttribute)(u,"class","btn btn-primary btn-open"),Object(a.appendChild)(u,Object(a.document_createTextNode)("Open")),Object(a.appendChild)(p,u);var m=Object(a.document_createElement)("button");Object(a.setAttribute)(m,"class","btn btn-default btn-download"),Object(a.appendChild)(m,Object(a.document_createTextNode)("Download")),Object(a.appendChild)(p,m);var f=Object(a.document_createElement)("button");return Object(a.setAttribute)(f,"class","btn btn-default btn-delete"),Object(a.appendChild)(f,Object(a.document_createTextNode)("Delete")),Object(a.appendChild)(p,f),Object(a.appendChild)(e,p),e}},40:function(t,e,n){"use strict";var a=n(2);a(function(){if(a(document).on("mousedown touchstart","a, button",function(){a(".no-outline").removeClass("no-outline"),a(this).addClass("no-outline")}),a(document).on("keydown",function(t){9===(t.keyCode||t.which)&&a(".no-outline").removeClass("no-outline")}),a(".side-navigation").length){var t=a(".close"),e=a(".side-navigation-affix"),n=a("a.navigation-btn"),i=a(".side-navigation-large"),o=a(".navigation-section");a(".side-navigation-small").length&&(i=a(".side-navigation-small"));var c=o.offset().top-48,r=a("body").height()-o.offset().top-o.height();e.affix({offset:{top:c,bottom:r}}),e.width(i.parent().width()),n.on("click",function(){i.css("display","block"),o.css("display","none"),n.css("display","none"),a("body").css("overflow","hidden")}),t.on("click",function(){i.css("display",""),o.css("display",""),n.css("display","inline-block"),a("body").css("overflow","")})}!function(){var t=a(".alert-stack");0!==t.length&&t.affix({offset:{top:t.offset().top}})}(),function(){var t=a(".back-to-top"),e=2*a(window).height();0===t.length||a(document).height()<e||(t.affix({offset:{top:e}}),t.on("click",function(){return a("html, body").animate({scrollTop:0},{duration:750,easing:"swing"}),!1}))}(),a("[data-scroll='smooth'] a[href*='#']:not([href='#'])").on("click",function(){if(location.pathname.replace(/^\//,"")===this.pathname.replace(/^\//,"")&&location.hostname===this.hostname){var t=a(this.hash);if((t=t.length?t:a("[name="+this.hash.slice(1)+"]")).length)return a("html, body").animate({scrollTop:t.offset().top},1500),!1}}),a(".checkbox-indeterminate").prop("indeterminate",!0),a(".rating-btn").on("mouseenter",function(){a(this),a(this).prevAll(".rating-btn").addClass("active"),a(this).addClass("active"),a(this).nextAll(".rating-btn").removeClass("active")}),a(".rating-stars-input").on("mouseleave",function(){a(this).find(".rating-btn").removeClass("active")}),a(".entity-list-expandable .entity-list-item").click(function(){if(!1===a(this).hasClass("active")){var t=a(this).parent();a(".entity-list-item",t).removeClass("active"),a(this).addClass("active")}})})},41:function(t,e,n){},42:function(t,e,n){"use strict";!function(t,e,n){var a=t.querySelectorAll("html")[0];a.className=a.className.replace(/(^|\s)no-js(\s|$)/,"$1js$2")}(document,window),n(38);var a=n(2);window.jQuery=a,n(37),n(41);var i=n(11),o=(n(20),n(21).saveAs),c=n(35);n(40);var r=n(39).default,s=document.getElementById.bind(document),d=s("new-room"),l=s("name"),p=s("public");function u(){var t=a("#saved-mindviews").empty(),e=localStorage.getItem("mindmaper-mindmaps-storage-v2"),n=JSON.parse(e);for(var s in n)!function(e){var s=n[e];console.log(r);var d=a(r({timeago:c().format(new Date(s.static.timestamp)),date:new Date(s.static.timestamp).toDateString(),name:s.static.name||"Unnamed",available:"api_bin"===s.type?"online":""}));t.append(d),d.find(".btn-open").on("click",function(){"api_bin"===s.type?window.location.href=window.location.origin+"/mindmapper.html?ispublic=true&id="+s.static.id+"&room="+s.room:window.location.href=window.location.origin+"/mindmapper.html?ispublic=false&id="+s.static.id}),d.find(".btn-download").on("click",function(){"api_bin"===s.type?a.get("https://api.myjson.com/bins/"+s.room,function(t,e,n){o(new Blob([JSON.stringify(t)]),(s.static.name||"Unnamed")+"-mindmap.onmm")}):i.getMindmaps().then(function(t){var e=t[s.static.id];o(new Blob([JSON.stringify(e)]),e.static.name+"-mindmap.onmm")})}),d.find(".btn-delete").on("click",function(){confirm("Are you sure?")&&(i.deleteMindmap(s),d.remove())})}(s);0===t.children().length&&a('<div class="container-fluid padded-top"><h2>No saved mindmaps.</h2><p>There\'s nothing here...</p></div>').appendTo(t)}d.addEventListener("submit",function(t){if(t.preventDefault(),p.checked){var e={static:{name:l.value,id:Math.random().toString(36)},elems:[{key:"default key",id:0,type:0,leftpos:"80px",toppos:"80px",connected_elems:[],"font-size":"25.6px",content:"new title"}],lines:[]};return a.ajax({url:"https://api.myjson.com/bins",type:"POST",data:JSON.stringify(e),contentType:"application/json; charset=utf-8",dataType:"json",error:function(t,e,n){alert("Status: "+e+"\nError: "+n)},success:function(t,e,n){var a=t.uri.split("/"),i=a[a.length-1];window.location.href=window.location.origin+"/mindmapper.html?ispublic=true&room="+i}}),!1}window.location.href=window.location.origin+"/mindmapper.html?ispublic=false&name="+l.value}),a("#master-items > *").each(function(t){a(this).on("click",function(){a("#detail-items [detail-item-index]").hide(),a("#detail-items [detail-item-index="+t+"]").show()})}),a("#detail-items [detail-item-index]").hide(),a("#detail-items [detail-item-index=0]").show(),a("[data-iframe-load]").each(function(t){a(this).attr("src",a(this).attr("data-iframe-load"))}),u();var m=function(){var t=document.createElement("div");return("draggable"in t||"ondragstart"in t&&"ondrop"in t)&&"FormData"in window&&"FileReader"in window}(),f=a(".box");if(m&&f.addClass("has-advanced-upload"),m){var b=!1;f.on("drag dragstart dragend dragover dragenter dragleave drop",function(t){t.preventDefault(),t.stopPropagation()}).on("dragover dragenter",function(){f.addClass("is-dragover")}).on("dragleave dragend drop",function(){f.removeClass("is-dragover")}).on("drop",function(t){b=t.originalEvent.dataTransfer.files})}f.on("submit",function(t){if(f.hasClass("is-uploading"))return!1;if(f.addClass("is-uploading").removeClass("is-error"),m){t.preventDefault();var e=new FormData(f.get(0));b&&a.each(b,function(t,n){e.append(h.attr("name"),n)}),a.ajax({url:f.attr("action"),type:f.attr("method"),data:e,dataType:"json",cache:!1,contentType:!1,processData:!1,complete:function(){f.removeClass("is-uploading")},success:function(t){f.addClass(1==t.success?"is-success":"is-error"),t.success||$errorMsg.text(t.error)},error:function(){}})}});var h=f.find('input[type="file"]'),v=f.find("label"),g=function(t){v.text(t.length>1?(h.attr("data-multiple-caption")||"").replace("{count}",t.length):t[0].name),function(t){var e=new FileReader;e.onload=function(t){var e=t.target.result,n=JSON.parse(e);"api_bin"===n.type?(i.putMindmap({type:"api_bin",room:n.room,static:{id:n.static.id,name:n.static.name,timestamp:n.static.timestamp}}),a.ajax({type:"PUT",url:"https://api.myjson.com/bins/"+n.room,data:e,async:!1,contentType:"application/json; charset=utf-8",dataType:"json",error:function(t,e,n){alert("unable to save mind map")},success:function(t,e,n){u(),alert("Stored online")}})):i.putMindmap(n).then(function(){u(),alert("Stored in app storage")})},e.readAsText(t[0])}(t)};f.on("drop",function(t){b=t.originalEvent.dataTransfer.files,g(b)}),h.on("change",function(t){g(t.target.files)})}});