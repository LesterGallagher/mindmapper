!function(e){function t(t){for(var i,r,c=t[0],s=t[1],d=t[2],m=0,p=[];m<c.length;m++)r=c[m],a[r]&&p.push(a[r][0]),a[r]=0;for(i in s)Object.prototype.hasOwnProperty.call(s,i)&&(e[i]=s[i]);for(l&&l(t);p.length;)p.shift()();return o.push.apply(o,d||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],i=!0,c=1;c<n.length;c++){var s=n[c];0!==a[s]&&(i=!1)}i&&(o.splice(t--,1),e=r(r.s=n[0]))}return e}var i={},a={1:0},o=[];function r(t){if(i[t])return i[t].exports;var n=i[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=e,r.c=i,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},r.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/bundle/";var c=window.webpackJsonp=window.webpackJsonp||[],s=c.push.bind(c);c.push=t,c=c.slice();for(var d=0;d<c.length;d++)t(c[d]);var l=s;o.push([152,0]),n()}({149:function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return a});var i=n(0);function a(e={}){var t=Object(i.document_createElement)("div");Object(i.setAttribute)(t,"class","entity-list-item");var n=Object(i.document_createElement)("div");Object(i.setAttribute)(n,"class","item-icon");var a=Object(i.document_createElement)("img");Object(i.setAttribute)(a,"alt","icon"),Object(i.setAttribute)(a,"height","20"),Object(i.setAttribute)(a,"src","public/img/mindmap-white.svg"),Object(i.appendChild)(n,a),Object(i.appendChild)(t,n);var o=Object(i.document_createElement)("div");Object(i.setAttribute)(o,"class","item-content-secondary");var r=Object(i.document_createElement)("div");Object(i.setAttribute)(r,"class","content-text-primary"),Object(i.appendChild)(r,Object(i.document_createTextNode)(""+e.timeago)),Object(i.appendChild)(o,r);var c=Object(i.document_createElement)("div");Object(i.setAttribute)(c,"class","content-text-secondary"),Object(i.appendChild)(c,Object(i.document_createTextNode)(""+e.date)),Object(i.appendChild)(o,c),Object(i.appendChild)(t,o);var s=Object(i.document_createElement)("div");Object(i.setAttribute)(s,"class","item-content-primary");var d=Object(i.document_createElement)("div");Object(i.setAttribute)(d,"class","content-text-primary"),Object(i.appendChild)(d,Object(i.document_createTextNode)(""+e.name)),Object(i.appendChild)(s,d);var l=Object(i.document_createElement)("div");Object(i.setAttribute)(l,"class","content-text-secondary"),Object(i.appendChild)(l,Object(i.document_createTextNode)(""+e.available)),Object(i.appendChild)(s,l),Object(i.appendChild)(t,s);var m=Object(i.document_createElement)("div");Object(i.setAttribute)(m,"class","item-content-expanded");var p=Object(i.document_createElement)("button");Object(i.setAttribute)(p,"class","btn btn-primary btn-open"),Object(i.appendChild)(p,Object(i.document_createTextNode)("Open")),Object(i.appendChild)(m,p);var u=Object(i.document_createElement)("button");Object(i.setAttribute)(u,"class","btn btn-default btn-download"),Object(i.appendChild)(u,Object(i.document_createTextNode)("Download")),Object(i.appendChild)(m,u);var f=Object(i.document_createElement)("button");return Object(i.setAttribute)(f,"class","btn btn-default btn-delete"),Object(i.appendChild)(f,Object(i.document_createTextNode)("Delete")),Object(i.appendChild)(m,f),Object(i.appendChild)(t,m),t}},150:function(e,t,n){"use strict";var i=n(8);i(function(){if(i(document).on("mousedown touchstart","a, button",function(){i(".no-outline").removeClass("no-outline"),i(this).addClass("no-outline")}),i(document).on("keydown",function(e){9===(e.keyCode||e.which)&&i(".no-outline").removeClass("no-outline")}),i(".side-navigation").length){var e=i(".close"),t=i(".side-navigation-affix"),n=i("a.navigation-btn"),a=i(".side-navigation-large"),o=i(".navigation-section");i(".side-navigation-small").length&&(a=i(".side-navigation-small"));var r=o.offset().top-48,c=i("body").height()-o.offset().top-o.height();t.affix({offset:{top:r,bottom:c}}),t.width(a.parent().width()),n.on("click",function(){a.css("display","block"),o.css("display","none"),n.css("display","none"),i("body").css("overflow","hidden")}),e.on("click",function(){a.css("display",""),o.css("display",""),n.css("display","inline-block"),i("body").css("overflow","")})}!function(){var e=i(".alert-stack");0!==e.length&&e.affix({offset:{top:e.offset().top}})}(),function(){var e=i(".back-to-top"),t=2*i(window).height();0===e.length||i(document).height()<t||(e.affix({offset:{top:t}}),e.on("click",function(){return i("html, body").animate({scrollTop:0},{duration:750,easing:"swing"}),!1}))}(),i("[data-scroll='smooth'] a[href*='#']:not([href='#'])").on("click",function(){if(location.pathname.replace(/^\//,"")===this.pathname.replace(/^\//,"")&&location.hostname===this.hostname){var e=i(this.hash);if((e=e.length?e:i("[name="+this.hash.slice(1)+"]")).length)return i("html, body").animate({scrollTop:e.offset().top},1500),!1}}),i(".checkbox-indeterminate").prop("indeterminate",!0),i(".rating-btn").on("mouseenter",function(){i(this),i(this).prevAll(".rating-btn").addClass("active"),i(this).addClass("active"),i(this).nextAll(".rating-btn").removeClass("active")}),i(".rating-stars-input").on("mouseleave",function(){i(this).find(".rating-btn").removeClass("active")}),i(".entity-list-expandable .entity-list-item").click(function(){if(!1===i(this).hasClass("active")){var e=i(this).parent();i(".entity-list-item",e).removeClass("active"),i(this).addClass("active")}})})},151:function(e,t,n){},152:function(e,t,n){"use strict";var i=n(45),a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(87));n(128),n(127),function(e,t,n){var i=e.querySelectorAll("html")[0];i.className=i.className.replace(/(^|\s)no-js(\s|$)/,"$1js$2")}(document,window),n(148);var o=n(8);window.jQuery=o,n(147),n(151);var r=n(66),c=(n(111),n(67).saveAs),s=n(126);n(150);var d=n(149).default,l=document.getElementById.bind(document),m=l("new-room"),p=l("mindmap-name"),u=l("public"),f=l("connect-room"),h=l("connect-room-url"),b=(a.initializeApp({apiKey:"AIzaSyAru0WoUG5NBKauUOvo5naWv8jW28LT-rI",authDomain:"mindmapper-a27ea.firebaseapp.com",databaseURL:"https://mindmapper-a27ea.firebaseio.com",projectId:"mindmapper-a27ea",storageBucket:"mindmapper-a27ea.appspot.com",messagingSenderId:"976340770009"}),a.firestore());function v(){var e=o("#saved-mindviews").empty(),t=localStorage.getItem("mindviewer-mindviews-storage-v2"),n=JSON.parse(t);for(var i in n)!function(t){var i=n[t];console.log(d);var a=o(d({timeago:s().format(new Date(i.static.timestamp)),date:new Date(i.static.timestamp).toDateString(),name:i.static.name||"Unnamed",available:"api_bin"===i.type||"firestore"===i.type?"online":""}));e.append(a),a.find(".btn-open").on("click",function(){"api_bin"===i.type?window.location.href=window.location.origin+"/mindmapper.html?ispublic=true&id="+i.static.id+"&room="+i.room:"firestore"===i.type?window.location.href=window.location.origin+"/mindmapper.html?ispublic=true&firestore=true&id="+i.static.id+"&room="+i.room:window.location.href=window.location.origin+"/mindmapper.html?ispublic=false&id="+i.static.id}),a.find(".btn-download").on("click",function(){"api_bin"===i.type?o.get("https://api.myjson.com/bins/"+i.room,function(e,t,n){c(new Blob([JSON.stringify(e)]),(i.static.name||"Unnamed")+"-mindview.onmm")}):"firestore"===i.type?b.collection("mindmaps").doc(i.room).get().then(function(e){e.exists?c(new Blob([JSON.stringify(e.data())]),(i.static.name||"Unnamed")+"-mindview.onmm"):alert("Sorry this mindmap no longer exists.")}).catch(function(e){alert("An error occurred: "+e.toString())}):r.getMindviews().then(function(e){var t=e[i.static.id];c(new Blob([JSON.stringify(t)]),t.static.name+"-mindview.onmm")})}),a.find(".btn-delete").on("click",function(){confirm("Are you sure?")&&(r.deleteMindview(i),a.remove())})}(i);0===e.children().length&&o('<div class="container-fluid padded-top"><h2>No saved mindviews.</h2><p>There\'s nothing here...</p></div>').appendTo(e)}a.auth().setPersistence(a.auth.Auth.Persistence.SESSION),a.auth().onAuthStateChanged(function(e){if(e)e.isAnonymous,e.uid;else a.auth().signInAnonymously().catch(function(e){e.code,e.message;alert("Sign in Anonymously failed. We failed to verify that you are a valid user.")})}),m.addEventListener("submit",function(e){if(e.preventDefault(),u.checked){var t={static:{name:p.value,id:Math.random().toString(36),timestamp:a.firestore.FieldValue.serverTimestamp()},elems:[{key:"default key",id:0,type:0,leftpos:"80px",toppos:"80px",connected_elems:[],"font-size":"25.6px",content:"new title"}],lines:[]};return b.collection("mindmaps").add(t).then(function(e){var t=e.id;window.location.href=window.location.origin+"/mindmapper.html?firestore=true&ispublic=true&room="+t}).catch(function(e){alert("Unable to create a new mindmap... "+e.toString())}),!1}window.location.href=window.location.origin+"/mindmapper.html?ispublic=false&name="+p.value}),o("#master-items > *").each(function(e){o(this).on("click",function(){o("#detail-items [detail-item-index]").hide(),o("#detail-items [detail-item-index="+e+"]").show()})}),o("#detail-items [detail-item-index]").hide(),o("#detail-items [detail-item-index=0]").show(),o("[data-iframe-load]").each(function(e){o(this).attr("src",o(this).attr("data-iframe-load"))}),f.onsubmit=function(e){e.preventDefault();var t=h.value,n=void 0;-1!==t.indexOf("mindmapper.html")?n=(0,i.decodeQuery)(t).room:n=t;return console.log("test",n),window.location.href=window.location.origin+"/mindmapper.html?ispublic=true&room="+n,!1},v();var g=function(){var e=document.createElement("div");return("draggable"in e||"ondragstart"in e&&"ondrop"in e)&&"FormData"in window&&"FileReader"in window}(),w=o(".box");if(g&&w.addClass("has-advanced-upload"),g){var y=!1;w.on("drag dragstart dragend dragover dragenter dragleave drop",function(e){e.preventDefault(),e.stopPropagation()}).on("dragover dragenter",function(){w.addClass("is-dragover")}).on("dragleave dragend drop",function(){w.removeClass("is-dragover")}).on("drop",function(e){y=e.originalEvent.dataTransfer.files})}w.on("submit",function(e){if(w.hasClass("is-uploading"))return!1;if(w.addClass("is-uploading").removeClass("is-error"),g){e.preventDefault();var t=new FormData(w.get(0));y&&o.each(y,function(e,n){t.append(j.attr("name"),n)}),o.ajax({url:w.attr("action"),type:w.attr("method"),data:t,dataType:"json",cache:!1,contentType:!1,processData:!1,complete:function(){w.removeClass("is-uploading")},success:function(e){w.addClass(1==e.success?"is-success":"is-error"),e.success||alert(e.error)},error:function(){alert("error")}})}});var j=w.find('input[type="file"]'),O=w.find("label"),x=function(e){O.text(e.length>1?(j.attr("data-multiple-caption")||"").replace("{count}",e.length):e[0].name),function(e){var t=new FileReader;t.onload=function(e){var t=e.target.result,n=JSON.parse(t);"api_bin"===n.type?(r.putMindview({type:"api_bin",room:n.room,static:{id:n.static.id,name:n.static.name,timestamp:n.static.timestamp}}),o.ajax({type:"PUT",url:"https://api.myjson.com/bins/"+n.room,data:t,async:!1,contentType:"application/json; charset=utf-8",dataType:"json",error:function(e,t,n){alert("unable to save mind map")},success:function(e,t,n){v(),alert("Stored online")}})):"firestore"===n.type?(r.putMindview({type:"firestore",room:n.room,static:{id:n.static.id,name:n.static.name,timestamp:n.static.timestamp}}),n.static.timestamp=a.firestore.FieldValue.serverTimestamp(),b.collection("mindmaps").doc(n.room).set().then(function(){v(),alert("Stored online")}).catch(function(e){alert("Unable to save mindmap... "+e.toString())})):r.putMindview(n).then(function(){v(),alert("Stored in app storage")})},t.readAsText(e[0])}(e)};w.on("drop",function(e){y=e.originalEvent.dataTransfer.files,x(y)}),j.on("change",function(e){x(e.target.files)})}});