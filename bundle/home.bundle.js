!function(t){function e(e){for(var a,r,c=e[0],s=e[1],d=e[2],l=0,m=[];l<c.length;l++)r=c[l],i[r]&&m.push(i[r][0]),i[r]=0;for(a in s)Object.prototype.hasOwnProperty.call(s,a)&&(t[a]=s[a]);for(u&&u(e);m.length;)m.shift()();return o.push.apply(o,d||[]),n()}function n(){for(var t,e=0;e<o.length;e++){for(var n=o[e],a=!0,c=1;c<n.length;c++){var s=n[c];0!==i[s]&&(a=!1)}a&&(o.splice(e--,1),t=r(r.s=n[0]))}return t}var a={},i={1:0},o=[];function r(e){if(a[e])return a[e].exports;var n=a[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=t,r.c=a,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)r.d(n,a,function(e){return t[e]}.bind(null,a));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/bundle/";var c=window.webpackJsonp=window.webpackJsonp||[],s=c.push.bind(c);c.push=e,c=c.slice();for(var d=0;d<c.length;d++)e(c[d]);var u=s;o.push([158,0]),n()}({158:function(t,e,n){"use strict";var a,i;a=document,window,(i=a.querySelectorAll("html")[0]).className=i.className.replace(/(^|\s)no-js(\s|$)/,"$1js$2"),n(41);var o=n(3);window.jQuery=o,n(42),n(159);var r=n(24),c=(n(25),n(35).saveAs),s=n(44);n(160);var d=n(161).default,u=document.getElementById.bind(document),l=u("new-room"),m=u("name"),p=u("public");function f(){var t=o("#saved-mindviews").empty(),e=localStorage.getItem("mindmaper-mindmaps-storage-v2"),n=JSON.parse(e);for(var a in n)!function(e){var a=n[e];console.log(d);var i=o(d({timeago:s().format(new Date(a.static.timestamp)),date:new Date(a.static.timestamp).toDateString(),name:a.static.name||"Unnamed",available:"api_bin"===a.type?"online":""}));t.append(i),i.find(".btn-open").on("click",function(){"api_bin"===a.type?window.location.href=window.location.origin+"/mindmapper.html?ispublic=true&id="+a.static.id+"&room="+a.room:window.location.href=window.location.origin+"/mindmapper.html?ispublic=false&id="+a.static.id}),i.find(".btn-download").on("click",function(){"api_bin"===a.type?o.get("https://api.myjson.com/bins/"+a.room,function(t,e,n){c(new Blob([JSON.stringify(t)]),(a.static.name||"Unnamed")+"-mindmap.onmm")}):r.getMindmaps().then(function(t){var e=t[a.static.id];c(new Blob([JSON.stringify(e)]),e.static.name+"-mindmap.onmm")})}),i.find(".btn-delete").on("click",function(){confirm("Are you sure?")&&(r.deleteMindmap(a),i.remove())})}(a);0===t.children().length&&o('<div class="container-fluid padded-top"><h2>No saved mindmaps.</h2><p>There\'s nothing here...</p></div>').appendTo(t)}l.addEventListener("submit",function(t){if(t.preventDefault(),p.checked){var e={static:{name:m.value,id:Math.random().toString(36)},elems:[{key:"default key",id:0,type:0,leftpos:"80px",toppos:"80px",connected_elems:[],"font-size":"25.6px",content:"new title"}],lines:[]};return o.ajax({url:"https://api.myjson.com/bins",type:"POST",data:JSON.stringify(e),contentType:"application/json; charset=utf-8",dataType:"json",error:function(t,e,n){alert("Status: "+e+"\nError: "+n)},success:function(t,e,n){var a=t.uri.split("/"),i=a[a.length-1];window.location.href=window.location.origin+"/mindmapper.html?ispublic=true&room="+i}}),!1}window.location.href=window.location.origin+"/mindmapper.html?ispublic=false&name="+m.value}),o("#master-items > *").each(function(t){o(this).on("click",function(){o("#detail-items [detail-item-index]").hide(),o("#detail-items [detail-item-index="+t+"]").show()})}),o("#detail-items [detail-item-index]").hide(),o("#detail-items [detail-item-index=0]").show(),o("[data-iframe-load]").each(function(t){o(this).attr("src",o(this).attr("data-iframe-load"))}),f();var h,b=("draggable"in(h=document.createElement("div"))||"ondragstart"in h&&"ondrop"in h)&&"FormData"in window&&"FileReader"in window,v=o(".box");if(b&&v.addClass("has-advanced-upload"),b){var g=!1;v.on("drag dragstart dragend dragover dragenter dragleave drop",function(t){t.preventDefault(),t.stopPropagation()}).on("dragover dragenter",function(){v.addClass("is-dragover")}).on("dragleave dragend drop",function(){v.removeClass("is-dragover")}).on("drop",function(t){g=t.originalEvent.dataTransfer.files})}v.on("submit",function(t){if(v.hasClass("is-uploading"))return!1;if(v.addClass("is-uploading").removeClass("is-error"),b){t.preventDefault();var e=new FormData(v.get(0));g&&o.each(g,function(t,n){e.append(y.attr("name"),n)}),o.ajax({url:v.attr("action"),type:v.attr("method"),data:e,dataType:"json",cache:!1,contentType:!1,processData:!1,complete:function(){v.removeClass("is-uploading")},success:function(t){v.addClass(1==t.success?"is-success":"is-error"),t.success||$errorMsg.text(t.error)},error:function(){}})}});var y=v.find('input[type="file"]'),w=v.find("label"),O=function(t){w.text(t.length>1?(y.attr("data-multiple-caption")||"").replace("{count}",t.length):t[0].name),function(t){var e=new FileReader;e.onload=function(t){var e=t.target.result,n=JSON.parse(e);"api_bin"===n.type?(r.putMindmap({type:"api_bin",room:n.room,static:{id:n.static.id,name:n.static.name,timestamp:n.static.timestamp}}),o.ajax({type:"PUT",url:"https://api.myjson.com/bins/"+n.room,data:e,async:!1,contentType:"application/json; charset=utf-8",dataType:"json",error:function(t,e,n){alert("unable to save mind map")},success:function(t,e,n){f(),alert("Stored online")}})):r.putMindmap(n).then(function(){f(),alert("Stored in app storage")})},e.readAsText(t[0])}(t)};v.on("drop",function(t){g=t.originalEvent.dataTransfer.files,O(g)}),y.on("change",function(t){O(t.target.files)})},159:function(t,e,n){},160:function(t,e,n){"use strict";var a=n(3);a(function(){if(a(document).on("mousedown touchstart","a, button",function(){a(".no-outline").removeClass("no-outline"),a(this).addClass("no-outline")}),a(document).on("keydown",function(t){9===(t.keyCode||t.which)&&a(".no-outline").removeClass("no-outline")}),a(".side-navigation").length){var t=a(".close"),e=a(".side-navigation-affix"),n=a("a.navigation-btn"),i=a(".side-navigation-large"),o=a(".navigation-section");a(".side-navigation-small").length&&(i=a(".side-navigation-small"));var r=o.offset().top-48,c=a("body").height()-o.offset().top-o.height();e.affix({offset:{top:r,bottom:c}}),e.width(i.parent().width()),n.on("click",function(){i.css("display","block"),o.css("display","none"),n.css("display","none"),a("body").css("overflow","hidden")}),t.on("click",function(){i.css("display",""),o.css("display",""),n.css("display","inline-block"),a("body").css("overflow","")})}var s,d,u;0!==(s=a(".alert-stack")).length&&s.affix({offset:{top:s.offset().top}}),d=a(".back-to-top"),u=2*a(window).height(),0===d.length||a(document).height()<u||(d.affix({offset:{top:u}}),d.on("click",function(){return a("html, body").animate({scrollTop:0},{duration:750,easing:"swing"}),!1})),a("[data-scroll='smooth'] a[href*='#']:not([href='#'])").on("click",function(){if(location.pathname.replace(/^\//,"")===this.pathname.replace(/^\//,"")&&location.hostname===this.hostname){var t=a(this.hash);if((t=t.length?t:a("[name="+this.hash.slice(1)+"]")).length)return a("html, body").animate({scrollTop:t.offset().top},1500),!1}}),a(".checkbox-indeterminate").prop("indeterminate",!0),a(".rating-btn").on("mouseenter",function(){a(this),a(this).prevAll(".rating-btn").addClass("active"),a(this).addClass("active"),a(this).nextAll(".rating-btn").removeClass("active")}),a(".rating-stars-input").on("mouseleave",function(){a(this).find(".rating-btn").removeClass("active")}),a(".entity-list-expandable .entity-list-item").click(function(){if(!1===a(this).hasClass("active")){var t=a(this).parent();a(".entity-list-item",t).removeClass("active"),a(this).addClass("active")}})})},161:function(t,e,n){"use strict";n.r(e),n.d(e,"default",function(){return i});var a=n(0);function i(t={}){var e=Object(a.document_createElement)("div");Object(a.setAttribute)(e,"class","entity-list-item");var n=Object(a.document_createElement)("div");Object(a.setAttribute)(n,"class","item-icon");var i=Object(a.document_createElement)("img");Object(a.setAttribute)(i,"alt","icon"),Object(a.setAttribute)(i,"height","20"),Object(a.setAttribute)(i,"src","public/img/mindmap-white.svg"),Object(a.appendChild)(n,i),Object(a.appendChild)(e,n);var o=Object(a.document_createElement)("div");Object(a.setAttribute)(o,"class","item-content-secondary");var r=Object(a.document_createElement)("div");Object(a.setAttribute)(r,"class","content-text-primary"),Object(a.appendChild)(r,Object(a.document_createTextNode)(""+t.timeago)),Object(a.appendChild)(o,r);var c=Object(a.document_createElement)("div");Object(a.setAttribute)(c,"class","content-text-secondary"),Object(a.appendChild)(c,Object(a.document_createTextNode)(""+t.date)),Object(a.appendChild)(o,c),Object(a.appendChild)(e,o);var s=Object(a.document_createElement)("div");Object(a.setAttribute)(s,"class","item-content-primary");var d=Object(a.document_createElement)("div");Object(a.setAttribute)(d,"class","content-text-primary"),Object(a.appendChild)(d,Object(a.document_createTextNode)(""+t.name)),Object(a.appendChild)(s,d);var u=Object(a.document_createElement)("div");Object(a.setAttribute)(u,"class","content-text-secondary"),Object(a.appendChild)(u,Object(a.document_createTextNode)(""+t.available)),Object(a.appendChild)(s,u),Object(a.appendChild)(e,s);var l=Object(a.document_createElement)("div");Object(a.setAttribute)(l,"class","item-content-expanded");var m=Object(a.document_createElement)("button");Object(a.setAttribute)(m,"class","btn btn-primary btn-open"),Object(a.appendChild)(m,Object(a.document_createTextNode)("Open")),Object(a.appendChild)(l,m);var p=Object(a.document_createElement)("button");Object(a.setAttribute)(p,"class","btn btn-default btn-download"),Object(a.appendChild)(p,Object(a.document_createTextNode)("Download")),Object(a.appendChild)(l,p);var f=Object(a.document_createElement)("button");return Object(a.setAttribute)(f,"class","btn btn-default btn-delete"),Object(a.appendChild)(f,Object(a.document_createTextNode)("Delete")),Object(a.appendChild)(l,f),Object(a.appendChild)(e,l),e}},24:function(t,e,n){"use strict";var a=n(25),i=console.error;window.storageEstimateWrapper=function(){return"storage"in navigator&&"estimate"in navigator.storage?navigator.storage.estimate():"webkitTemporaryStorage"in navigator&&"queryUsageAndQuota"in navigator.webkitTemporaryStorage?new Promise(function(t,e){navigator.webkitTemporaryStorage.queryUsageAndQuota(function(e,n){t({usage:e,quota:n})},e)}):Promise.resolve({usage:NaN,quota:NaN})};var o=new a("data"),r=void 0,c=Promise.resolve(),s=function(){return new Promise(function(t,e){if(void 0!==r)t(r);else{var n=JSON.parse(localStorage.getItem("mindmaper-mindmaps-storage-v2")||"{}")||{},a=Object.keys(n).map(function(t){return o.get("mindmap-items-"+t).then(function(e){n[t]=e})});Promise.all(a).then(function(){t(r=n)}).catch(function(t){i(t),e()})}})},d=function t(){var e=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.putMindmap=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return c=new Promise(function(n,a){(e?Promise.resolve():c).then(function(){return s()}).then(function(e){return e[t.static.id]=t,r=e,o.set("mindmap-items-"+t.static.id,t).then(function(){var t=function(t){var e={};return Object.keys(t).forEach(function(n){var a=t[n];e[n]={static:{name:a.static.name,timestamp:a.static.timestamp,id:a.static.id},type:a.type,room:a.room}}),e}(e);try{localStorage.setItem("mindmaper-mindmaps-storage-v2",JSON.stringify(t))}catch(t){"QuotaExceededError"!==t.name&&"NS_ERROR_DOM_QUOTA_REACHED"!==t.name||alert("Unable to store data because their is not enough space.")}n()})}).catch(function(t){i(t),n()})})},this.shouldWeakPut=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return c=new Promise(function(n,a){(e?Promise.resolve():c).then(function(){return s()}).then(function(e){var a=!e[t.static.id]||e[t.static.id].should_update_token!==t.should_update_token;n(a)}).catch(function(t){i(t),n(!0)})})},this.tryWeakPut=function(t){return c=new Promise(function(n,a){c.then(function(){return e.shouldWeakPut(t,!0)}).then(function(a){a?e.putMindmap(t,!0).then(function(){n(!0)}):n(!1)}).catch(n)})},this.getMindmaps=function(){return c=c.then(function(){return s()})},this.deleteMindmap=function(t){return e.deleteMindmapKey(t.static.id)},this.deleteMindmapKey=function(t){return c=new Promise(function(e,n){c.then(function(){return s()}).then(function(n){return o.delete("mindmap-items-"+t).then(function(){delete n[t],r=n;try{localStorage.setItem("mindmaper-mindmaps-storage-v2",JSON.stringify(r))}catch(t){"QuotaExceededError"!==t.name&&"NS_ERROR_DOM_QUOTA_REACHED"!==t.name||alert("Unable to store data because you've reached the maximum storage quota.")}e()})}).catch(e)})};try{localStorage.getItem("test")}catch(t){18===t.code&&alert("You've blocked mindmapper from settings cookies on the mindmaper website. We don't send cookies or use cookies, except for anonimized analytics. By blocking cookies you've also blocked the saving of mindmaps, bookmarks, favorites etc. You can read our privacy statement here: https://esstudio.site/privacy-policy",{title:"Crash"}),i(t)}};d.isFirstTimeAppOpening=function(){return!localStorage.getItem("mindmaper-mindmaps-storage-v2")},d.storageEstimateWrapper=function(){return(void 0).storageEstimateWrapper()},d.getDB=function(){return o},t.exports=new d},25:function(t,e,n){"use strict";var a,i;t.exports=(a=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),i.call(this),this.name=e;var n=this;this.ready=new Promise(function(t,a){var i=(window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB).open(location.origin);i.onupgradeneeded=function(t){n.db=t.target.result,n.db.createObjectStore(e)},i.onsuccess=function(e){n.db=e.target.result,t()},i.onerror=function(t){n.db=t.target.result,a(t)}})},i=function(){var t=this;this.get=function(e){var n=t;return t.ready.then(function(){return new Promise(function(t,a){var i=n.getStore().get(e);i.onsuccess=function(e){t(e.target.result)},i.onerror=a})})},this.getStore=function(){var e=t.db.transaction([t.name],"readwrite");return e.onabort=function(t){var e,n,a;"QuotaExceededError"===t.target.error.name&&alert("Unable to store data because you've reached the maximum storage quota.",(a=!0,(n="cancelable")in(e={cancelable:!0})?Object.defineProperty(e,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[n]=a,e))},e.objectStore(t.name)},this.set=function(e,n){return new Promise(function(a,i){return t.ready.then(function(){var o=t.getStore().put(n,e);o.onsuccess=function(t){a()},o.onerror=i})})},this.delete=function(e){return t.ready.then(function(){return new Promise(function(n,a){var i=t.getStore().delete(e);i.onsuccess=n,i.onerror=a})})},this.deleteDatabase=function(){window.indexedDB.deleteDatabase(location.origin)}},a)}});